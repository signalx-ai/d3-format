// https://d3js.org/d3-format/ v1.4.4 Copyright 2021 Mike Bostock
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).d3=t.d3||{})}(this,(function(t){"use strict";function n(t,n){if((r=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var r,i=t.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+t.slice(r+1)]}function r(t){return(t=n(Math.abs(t)))?t[1]:NaN}function i(t,n){return function(i,e){return Math.max(0,3*Math.max(t,Math.min(n,Math.floor(r(e)/3)))-r(Math.abs(i)))}}var e=i(-8,8),o=i(0,4);var a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function u(t){if(!(n=a.exec(t)))throw new Error("invalid format: "+t);var n;return new c({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function c(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function s(t,n,r){let i=n.length;return Math.floor(t/i)*r[r.length-1]+r[t%i]}function f(t,n,r,i,e){let o=t;for(let a=t;a<=n;a++){if(!(r>=s(a,i,e)))break;o=a}return Math.max(t,Math.min(n,o))}function l(t){let n=[0],r=0;for(let i=0;i<t.length;i++){r+=t[i],n.push(r)}return n}function h(t,r,i){var e=n(t,r);if(!e)return t+"";var o=e[0],a=e[1],u=a-i(a)+1,c=o.length;return u===c?o:u>c?o+new Array(u-c+1).join("0"):u>0?o.slice(0,u)+"."+o.slice(u):"0."+new Array(1-u).join("0")+n(t,Math.max(0,r+u-1))[0]}function d(t,n,r){let i=l(r);return function(e){return function(t,n,r,i,e){return s(f(t,n,r,i,e),i,e)}(t,n,e,r,i)}}function m(t,n,r){let i=l(r);return function(e){return f(t,n,e,r,i)}}function g(t,r){var i=n(t,r);if(!i)return t+"";var e=i[0],o=i[1];return o<0?"0."+new Array(-o).join("0")+e:e.length>o+1?e.slice(0,o+1)+"."+e.slice(o+1):e+new Array(o-e.length+2).join("0")}u.prototype=c.prototype,c.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var p={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},K:function(t,n){let r=d(0,t.length-1,n);return function(t,n){return h(t,n,r)}},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return g(100*t,n)},r:g,s:function(t,n){return h(t,n,d(-8,8,[3]))},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function v(t){return t}var y,M=Array.prototype.map,x=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"],b=["","K","M","B","T"];function w(t){var i=void 0===t.grouping||void 0===t.thousands?v:function(t,n){return function(r,i){for(var e=r.length,o=[],a=0,u=t[0],c=0;e>0&&u>0&&(c+u+1>i&&(u=Math.max(1,i-c)),o.push(r.substring(e-=u,e+u)),!((c+=u+1)>i));)u=t[a=(a+1)%t.length];return o.reverse().join(n)}}(M.call(t.grouping,Number),t.thousands+""),e=void 0===t.currencyAbbreviations?b:t.currencyAbbreviations,o=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",c=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?v:function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(M.call(t.numerals,String)),f=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"-":t.minus+"",h=void 0===t.nan?"NaN":t.nan+"",g=void 0===t.grouping?[3]:t.grouping;function y(t){var r=(t=u(t)).fill,v=t.align,y=t.sign,M=t.symbol,b=t.zero,w=t.width,P=t.comma,K=t.precision,S=t.trim,k=t.type;"n"===k?(P=!0,k="g"):p[k]||(void 0===K&&(K=12),S=!0,k="g"),(b||"0"===r&&"="===v)&&(b=!0,r="0",v="=");var A="$"===M?o:"#"===M&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",N="$"===M?a:/[%p]/.test(k)?f:"",j=p[k],z=/[defgKprs%]/.test(k);let C,E;function $(t){var o,a,u,f=A,d=N;if("c"===k)d=j(t)+d,t="";else{var m=(t=+t)<0;let r=isNaN(t)?h:t;if(t=isNaN(t)?h:j(Math.abs(t),K),S&&(t=function(t){t:for(var n,r=t.length,i=1,e=-1;i<r;++i)switch(t[i]){case".":e=n=i;break;case"0":0===e&&(e=i),n=i;break;default:if(e>0){if(!+t[i])break t;e=0}}return e>0?t.slice(0,e)+t.slice(n+1):t}(t)),m&&0==+t&&(m=!1),f=(m?"("===y?y:l:"-"===y||"("===y?"":y)+f,"s"===k||"K"===k){let t=n(Math.abs(r),K)[1];"s"===k?d=x[8+E(C(t))]+d:"K"===k&&(d=e[-0+E(C(t))]+d)}if(d+=m&&"("===y?")":"",z)for(o=-1,a=t.length;++o<a;)if(48>(u=t.charCodeAt(o))||u>57){d=(46===u?c+t.slice(o+1):t.slice(o))+d,t=t.slice(0,o);break}}P&&!b&&(t=i(t,1/0));var g=f.length+t.length+d.length,p=g<w?new Array(w-g+1).join(r):"";switch(P&&b&&(t=i(p+t,p.length?w-d.length:1/0),p=""),v){case"<":t=f+t+d+p;break;case"=":t=f+p+t+d;break;case"^":t=p.slice(0,g=p.length>>1)+f+t+d+p.slice(g);break;default:t=p+f+t+d}return s(t)}return"K"===k&&(j=j(e,g)),"s"===k?C=d(-8,8,[3]):"K"===k&&(C=d(0,e.length-1,g)),"s"===k?E=m(-8,8,[3]):"K"===k&&(E=m(0,e.length-1,g)),K=void 0===K?"K"===k?3:6:/[gKprs]/.test(k)?Math.max(1,Math.min(21,K)):Math.max(0,Math.min(20,K)),$.toString=function(){return t+""},$}function w(t,n,i,e){let o=d(n,i,e),a=m(n,i,e);return function(i,e){var c=r(e);let s,f,l,h;h=y(((i=u(i)).type="f",i)),s=o(c),f=Math.pow(10,-s);let d=a(s);return l=t[-1*n+d],function(t){return h(f*t)+l}}}var P=w(x,-8,8,[3]);return{format:y,formatCurrencyPrefix:w(e,0,e.length-1,g),formatPrefix:P}}function P(n){return y=w(n),t.format=y.format,t.formatCurrencyPrefix=y.formatCurrencyPrefix,t.formatPrefix=y.formatPrefix,y}P({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),t.FormatSpecifier=c,t.currencyPrecisionPrefix=o,t.formatDefaultLocale=P,t.formatLocale=w,t.formatSpecifier=u,t.precisionFixed=function(t){return Math.max(0,-r(Math.abs(t)))},t.precisionPrefix=e,t.precisionRound=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,r(n)-r(t))+1},Object.defineProperty(t,"__esModule",{value:!0})}));
